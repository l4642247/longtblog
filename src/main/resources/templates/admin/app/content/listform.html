<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="utf-8">
  <title>编辑文章</title>
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
  <link rel="stylesheet" href="../../../layuiadmin/layui/css/layui.css" media="all">
  <link rel="stylesheet" href="../../../layuiadmin/style/admin.css" media="all">
</head>
<body>

<div class="layui-fluid">
  <div class="layui-row layui-col-space15">
    <div class="layui-col-md12">
      <div class="layui-card">
        <div class="layui-card-header">编辑文章</div>
        <div class="layui-card-body" pad15>

          <div class="layui-form" lay-filter="layuiadmin-app-form-list" id="layuiadmin-app-form-list" style="padding: 20px 30px 0 0;">
            <div class="layui-form-item">
              <label class="layui-form-label">文章标题</label>
              <div class="layui-input-inline">
                <input type="text" name="title" lay-verify="required" placeholder="请输入用户名" autocomplete="off" class="layui-input">
              </div>
            </div>

            <div class="layui-form-item">
              <label class="layui-form-label">内容</label>
              <div class="layui-input-inline">
                <textarea th:utext="${article.content}" class="summernote" name="content">写点什么吧...</textarea>
              </div>
            </div>

            <div class="layui-form-item">
              <label class="layui-form-label">标签</label>
              <div class="layui-input-inline">
                <input name="tags" th:value="${tags}" id="tags"  value="admin,dashboard,xyz">
              </div>
            </div>
            <div class="layui-form-item">
              <label class="layui-form-label">目录</label>
              <div class="layui-input-inline">
                <select name="catalog" lay-verify="required">
                  <option th:each="catalog:${catalogList}" th:value="${catalog.id}" th:text="${catalog.name}"></option>
                </select>
              </div>
            </div>
            <div class="layui-form-item">
              <label class="layui-form-label">类型</label>
              <div class="layui-input-inline">
                <select name="type" lay-verify="required">
                  <option value="0">日记</option>
                  <option value="1">文章</option>
                  <option value="2">关于我</option>
                </select>
              </div>
            </div>
            <div class="layui-form-item">
              <label class="layui-form-label">摘要</label>
              <div class="layui-input-inline">
                <textarea name="summary" lay-verify="required" style="width: 400px; height: 100px;" autocomplete="off" class="layui-textarea"></textarea>
              </div>
            </div>
            <div class="layui-form-item">
              <label class="layui-form-label">发布状态</label>
              <div class="layui-input-inline">
                <input type="checkbox" lay-verify="required" lay-filter="status" name="status" lay-skin="switch" lay-text="已发布|待修改">
              </div>
            </div>

            <div class="layui-form-item layui-hide">
              <input type="button" lay-submit lay-filter="layuiadmin-app-form-submit" id="layuiadmin-app-form-submit" value="确认添加">
              <input type="button" lay-submit lay-filter="layuiadmin-app-form-edit" id="layuiadmin-app-form-edit" value="确认编辑">
            </div>
          </div>

        </div>
      </div>
    </div>
  </div>
</div>

<script src="../../../layuiadmin/layui/layui.js"></script>
<!--form validation init-->
<script src="../../../assets/base/js/jquery.min.js"></script>
<script src="../../../summernote/dist/summernote.min.js"></script>
<script src="../../../tagsinput/jquery.tagsinput.min.js"></script>
<script>
    layui.config({
        base: '../../../layuiadmin/' //静态资源所在路径
    }).extend({
        index: 'lib/index' //主入口模块
    }).use(['index', 'set']);

    // Tags Input
    jQuery('#tags').tagsInput({width:'100%',height:'80px'});

    jQuery(document).ready(function(){
        $('.summernote').summernote({
            height: 600,                 // set editor height
            minHeight: null,             // set minimum height of editor
            maxHeight: null,             // set maximum height of editor
            focus: true,                // set focus to editable area after initializing summernote
            lang:'zh-CN',
            callbacks: {
                onImageUpload: function(files) {
                    //上传图片到服务器
                    var formData = new FormData();
                    formData.append('file',files[0]);
                    $.ajax({
                        url : 'http://www.nicecoder.cn/imageupload/imageUpload',//后台文件上传接口
                        type : 'POST',
                        data : formData,
                        processData : false,
                        contentType : false,
                        success : function(result) {
                            var jResult = JSON.parse(result);
                            $('.summernote').summernote('insertImage',jResult.data.src);
                        }
                    });
                }
            }
        });
    });
</script>
</body>
</html>